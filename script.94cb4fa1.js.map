{"version":3,"sources":["../index.mjs","script.ts"],"names":["pattern","patterns_default","fullPattern","naivePattern","getPattern","RegExp","error","list","exports","isbotNaive","userAgent","Boolean","test","isbot","createIsbot","customPattern","createIsbotFromList","list2","pattern2","join","isbotMatch","_userAgent$match$","_userAgent$match","match","isbotMatches","map","part","_userAgent$match2","filter","isbotPattern","_list$find","find","isbotPatterns"],"mappings":";AAoNwH,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,oBAAA,QAAA,iBAAA,EAAA,QAAA,WAAA,EAAA,QAAA,MAAA,EAAA,QAAA,KAAA,QAAA,cAAA,QAAA,aAAA,QAAA,WAAA,QAAA,aAAA,QAAA,gBAAA,EAnNxH,IA0LIA,EA1LAC,EAAmB,CACrB,YACA,UACA,mBACA,cACA,iBACA,2DACA,4BACA,4BACA,mBACA,kBACA,SACA,gBACA,gBACA,SACA,KACA,wEACA,cACA,UACA,cACA,SACA,eACA,iBACA,eACA,aACA,OACA,gBACA,cACA,WACA,WACA,UACA,UACA,kBACA,aACA,gBACA,aACA,cACA,YACA,cACA,aACA,YACA,UACA,UACA,WACA,UACA,UACA,UACA,UACA,WACA,WACA,kBACA,eACA,yCACA,2BACA,gBACA,WACA,UACA,oBACA,OACA,WACA,YACA,UACA,QACA,QACA,QACA,QACA,QACA,YACA,eACA,OACA,SACA,WACA,YACA,SACA,WACA,eACA,SACA,sBACA,OACA,cACA,aACA,QACA,YACA,oBACA,SACA,UACA,WACA,qBACA,WACA,eACA,cACA,UACA,mBACA,YACA,gBACA,UACA,mBACA,UACA,QACA,QACA,oBACA,cACA,aACA,QACA,QACA,YACA,YACA,WACA,eACA,YACA,YACA,WACA,aACA,OACA,UACA,aACA,aACA,WACA,UACA,2BACA,QACA,cACA,SACA,UACA,UACA,YACA,YACA,UACA,aACA,UACA,UACA,cACA,OACA,QACA,WACA,WACA,YACA,SACA,OACA,UACA,UACA,aACA,UACA,QACA,cACA,SACA,aACA,WACA,YACA,QACA,QACA,QACA,MACA,OACA,SACA,SACA,QACA,YACA,aACA,SACA,SACA,aACA,oBACA,eACA,UACA,YACA,QACA,UACA,QACA,aACA,gBACA,MACA,WACA,aACA,YACA,aACA,WACA,YACA,SAIEC,EAAc,o4DAGdC,EAAe,oCAEnB,SAASC,IACP,GAAIJ,aAAmBK,OACrB,OAAOL,EAET,IACEA,EAAU,IAAIK,OAAOH,EAAa,KAClC,MAAOI,GACPN,EAAUG,EAEZ,OAAOH,EAET,IAAIO,EAAIC,QAAAD,KAAGN,EACPQ,EAAUD,QAAAC,WAAG,SAACC,GAAS,OAAKC,QAAQD,IAAcP,EAAaS,KAAKF,IACxE,SAASG,EAAMH,GACb,OAAOC,QAAQD,IAAcN,IAAaQ,KAAKF,GAEjD,IAAII,EAAWN,QAAAM,YAAG,SAACC,GAAa,OAAK,SAACL,GAAS,OAAKC,QAAQD,IAAcK,EAAcH,KAAKF,KACzFM,EAAmBR,QAAAQ,oBAAG,SAACC,GACzB,IAAMC,EAAW,IAAIb,OAAOY,EAAME,KAAK,KAAM,KAC7C,OAAO,SAACT,GAAS,OAAKC,QAAQD,IAAcQ,EAASN,KAAKF,KAExDU,EAAUZ,QAAAY,WAAG,SAACV,GAAS,IAAAW,EAAAC,EAAA,OAAwCD,QAAxCA,EAAKX,MAAAA,GAA8BY,QAArBA,EAATZ,EAAWa,MAAMnB,YAAjBkB,IAA8BA,OAA9BA,EAAAA,EAAiC,UAAED,IAAAA,EAAAA,EAAI,MACnEG,EAAYhB,QAAAgB,aAAG,SAACd,GAAS,OAAKH,EAAKkB,IAAI,SAACC,GAAI,IAAAC,EAAA,OAAKjB,MAAAA,GAAuCiB,QAA9BA,EAATjB,EAAWa,MAAM,IAAIlB,OAAOqB,EAAM,aAAlCC,IAAuCA,OAAvCA,EAAAA,EAA0C,KAAIC,OAAOjB,UACtGkB,EAAYrB,QAAAqB,aAAG,SAACnB,GAAS,IAAAoB,EAAA,OAAKpB,GAA8EoB,QAArEA,EAAGvB,EAAKwB,KAAK,SAACb,GAAQ,OAAK,IAAIb,OAAOa,EAAU,KAAKN,KAAKF,YAAWoB,IAAAA,EAAAA,EAAW,MACvHE,EAAaxB,QAAAwB,cAAG,SAACtB,GAAS,OAAKA,EAAYH,EAAKqB,OAAO,SAACV,GAAQ,OAAK,IAAIb,OAAOa,EAAU,KAAKN,KAAKF,KAAc;;AC1GtH,aA1GA,IAAA,EAAA,QAAA,MAEA,CACC,IAKI,EALE,EAAW,SAAS,cAAc,YAClC,EAAS,SAAS,cAAc,UAChC,EAAW,SAAS,cACzB,oBAIK,EAAM,IAAI,IAAI,OAAO,SAAS,MAC9B,EAAK,EAAI,aAAa,IAAI,MAShC,SAAS,EAAM,GAAkB,IACxB,EADe,EAAN,OACT,MACR,aAAa,GACb,EAAQ,WAAW,EAAO,IAAK,GAGhC,SAAS,EACR,EACA,EACA,GAEA,GAAI,EAAK,CACR,IAAM,EAAM,SAAS,cAAc,OACnC,EAAI,YAAY,SAAS,eAAc,GAAA,OAAI,KAC3C,EAAO,YAAY,QAEnB,EAAO,YAAY,SAAS,eAAc,GAAA,OAAI,KAIhD,SAAS,EAAQ,GAChB,IAAM,EAAW,SAAS,yBAG1B,IAFW,EAAA,EAAK,OAAC,GAET,CACP,IAAM,GAAQ,EAAA,EAAU,YAAC,GACnB,GAAW,EAAA,EAAa,eAAC,GACzB,EAAU,EAAS,KAAK,SAAC,GAAe,OAC7C,IAAI,OAAO,EAAS,KAAK,KAAK,KAE/B,QAAQ,IAAI,EAAU,GACtB,EAAO,EAAU,KAAM,qBACvB,EAAO,EAAU,KAAM,kBACvB,EAAO,EAAU,MAAO,GACxB,EAAO,EAAU,KAAM,yBACvB,EAAO,EAAU,MAAO,QAExB,EACC,EACA,KACA,gEAGF,OAAO,EAGR,SAAS,IAAgC,IAA1B,EAAK,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAG,GAAA,EAAS,UAE/B,IADA,EAAQ,EAAM,OACP,EAAO,YACb,EAAO,YAAY,EAAO,YAEb,KAAV,EAOJ,EAAO,YAAY,EAAQ,IAN1B,EAAO,YACN,SAAS,eAAe,6CA5D3B,EAAS,WAAW,QAAQ,SAAC,GAAK,IAAA,EAAA,OAAqB,QAArB,EAAK,EAAM,kBAAN,IAAgB,OAAhB,EAAA,EAAkB,YAAY,KACrE,EAAS,YAAY,SAAS,eAAe,GAAM,UAAU,YAC7D,EAAS,iBAAiB,QAAS,GACnC,EAAS,iBAAiB,QAAS,GACnC,EAAS,iBAAiB,QAAS,WAAA,OAAM,EAAS,WAClD,IA+DA,EAAS,iBAAiB,QAAS,SAAC,GACnC,EAAM,iBACN,IAAA,EAAqC,SAAS,SAAtC,EAAQ,EAAR,SAAU,EAAI,EAAJ,KAAM,EAAQ,EAAR,SACxB,UAAU,UAAU,UACnB,CACC,EACA,KACA,EACA,EACA,OACA,mBAAmB,EAAS,QAC3B,KAAK,KAER,IAAM,EAAS,SAAS,cAAc,UACtC,EAAO,YAAY,SAAS,eAAe,wBAC3C,SAAS,KAAK,YAAY,GAC1B,EAAO,YACP,WAAW,WACV,EAAO,iBAAiB,gBAAiB,WACxC,EAAO,QACP,SAAS,KAAK,YAAY,KAE3B,EAAO,MAAM,QAAU,KACrB","file":"script.94cb4fa1.js","sourceRoot":"../page","sourcesContent":["// src/patterns.json\nvar patterns_default = [\n  \" daum[ /]\",\n  \" deusu/\",\n  \" yadirectfetcher\",\n  \"(?:^| )site\",\n  \"(?:^|[^g])news\",\n  \"(?<! (?:channel/|google/))google(?!(app|/google| pixel))\",\n  \"(?<! cu)bot(?:[^\\\\w]|_|$)\",\n  \"(?<! ya(?:yandex)?)search\",\n  \"(?<!(?:lib))http\",\n  \"(?<![hg]m)score\",\n  \"@[a-z]\",\n  \"\\\\(at\\\\)[a-z]\",\n  \"\\\\[at\\\\][a-z]\",\n  \"^12345\",\n  \"^<\",\n  \"^[\\\\w \\\\.\\\\-\\\\(?:\\\\):]+(?:/v?\\\\d+(\\\\.\\\\d+)?(?:\\\\.\\\\d{1,10})?)?(?:,|$)\",\n  \"^[^ ]{50,}$\",\n  \"^active\",\n  \"^ad muncher\",\n  \"^amaya\",\n  \"^anglesharp/\",\n  \"^avsdevicesdk/\",\n  \"^bidtellect/\",\n  \"^biglotron\",\n  \"^bot\",\n  \"^btwebclient/\",\n  \"^clamav[ /]\",\n  \"^client/\",\n  \"^cobweb/\",\n  \"^coccoc\",\n  \"^custom\",\n  \"^ddg[_-]android\",\n  \"^discourse\",\n  \"^dispatch/\\\\d\",\n  \"^downcast/\",\n  \"^duckduckgo\",\n  \"^facebook\",\n  \"^fdm[ /]\\\\d\",\n  \"^getright/\",\n  \"^gozilla/\",\n  \"^hatena\",\n  \"^hobbit\",\n  \"^hotzonu\",\n  \"^hwcdn/\",\n  \"^jeode/\",\n  \"^jetty/\",\n  \"^jigsaw\",\n  \"^linkdex\",\n  \"^metauri\",\n  \"^microsoft bits\",\n  \"^movabletype\",\n  \"^mozilla/\\\\d\\\\.\\\\d \\\\(compatible;?\\\\)$\",\n  \"^mozilla/\\\\d\\\\.\\\\d \\\\w*$\",\n  \"^navermailapp\",\n  \"^netsurf\",\n  \"^nuclei\",\n  \"^offline explorer\",\n  \"^php\",\n  \"^postman\",\n  \"^postrank\",\n  \"^python\",\n  \"^rank\",\n  \"^read\",\n  \"^reed\",\n  \"^rest\",\n  \"^serf\",\n  \"^snapchat\",\n  \"^space bison\",\n  \"^svn\",\n  \"^swcd \",\n  \"^taringa\",\n  \"^thumbor/\",\n  \"^track\",\n  \"^tumblr/\",\n  \"^user-agent:\",\n  \"^valid\",\n  \"^venus/fedoraplanet\",\n  \"^w3c\",\n  \"^webbandit/\",\n  \"^webcopier\",\n  \"^wget\",\n  \"^whatsapp\",\n  \"^xenu link sleuth\",\n  \"^yahoo\",\n  \"^yandex\",\n  \"^zdm/\\\\d\",\n  \"^zoom marketplace/\",\n  \"^{{.*}}$\",\n  \"adbeat\\\\.com\",\n  \"appinsights\",\n  \"archive\",\n  \"ask jeeves/teoma\",\n  \"bit\\\\.ly/\",\n  \"bluecoat drtr\",\n  \"browsex\",\n  \"burpcollaborator\",\n  \"capture\",\n  \"catch\",\n  \"check\",\n  \"chrome-lighthouse\",\n  \"chromeframe\",\n  \"classifier\",\n  \"cloud\",\n  \"crawl\",\n  \"cryptoapi\",\n  \"dareboost\",\n  \"datanyze\",\n  \"dataprovider\",\n  \"dejaclick\",\n  \"dmbrowser\",\n  \"download\",\n  \"evc-batch/\",\n  \"feed\",\n  \"firephp\",\n  \"freesafeip\",\n  \"gomezagent\",\n  \"headless\",\n  \"httrack\",\n  \"hubspot marketing grader\",\n  \"hydra\",\n  \"ibisbrowser\",\n  \"images\",\n  \"inspect\",\n  \"iplabel\",\n  \"ips-agent\",\n  \"java(?!;)\",\n  \"library\",\n  \"mail\\\\.ru/\",\n  \"manager\",\n  \"monitor\",\n  \"neustar wpm\",\n  \"node\",\n  \"nutch\",\n  \"offbyone\",\n  \"optimize\",\n  \"pageburst\",\n  \"parser\",\n  \"perl\",\n  \"phantom\",\n  \"pingdom\",\n  \"powermarks\",\n  \"preview\",\n  \"proxy\",\n  \"ptst[ /]\\\\d\",\n  \"reader\",\n  \"reputation\",\n  \"resolver\",\n  \"retriever\",\n  \"rexx;\",\n  \"rigor\",\n  \"robot\",\n  \"rss\",\n  \"scan\",\n  \"scrape\",\n  \"server\",\n  \"sogou\",\n  \"sparkler/\",\n  \"speedcurve\",\n  \"spider\",\n  \"splash\",\n  \"statuscake\",\n  \"stumbleupon\\\\.com\",\n  \"supercleaner\",\n  \"synapse\",\n  \"synthetic\",\n  \"tools\",\n  \"torrent\",\n  \"trace\",\n  \"transcoder\",\n  \"twingly recon\",\n  \"url\",\n  \"virtuoso\",\n  \"wappalyzer\",\n  \"webglance\",\n  \"webkit2png\",\n  \"whatcms/\",\n  \"wordpress\",\n  \"zgrab\"\n];\n\n// src/pattern.ts\nvar fullPattern = \" daum[ /]| deusu/| yadirectfetcher|(?:^| )site|(?:^|[^g])news|(?<! (?:channel/|google/))google(?!(app|/google| pixel))|(?<! cu)bot(?:[^\\\\w]|_|$)|(?<! ya(?:yandex)?)search|(?<!(?:lib))http|(?<![hg]m)score|@[a-z]|\\\\(at\\\\)[a-z]|\\\\[at\\\\][a-z]|^12345|^<|^[\\\\w \\\\.\\\\-\\\\(?:\\\\):]+(?:/v?\\\\d+(\\\\.\\\\d+)?(?:\\\\.\\\\d{1,10})?)?(?:,|$)|^[^ ]{50,}$|^active|^ad muncher|^amaya|^anglesharp/|^avsdevicesdk/|^bidtellect/|^biglotron|^bot|^btwebclient/|^clamav[ /]|^client/|^cobweb/|^coccoc|^custom|^ddg[_-]android|^discourse|^dispatch/\\\\d|^downcast/|^duckduckgo|^facebook|^fdm[ /]\\\\d|^getright/|^gozilla/|^hatena|^hobbit|^hotzonu|^hwcdn/|^jeode/|^jetty/|^jigsaw|^linkdex|^metauri|^microsoft bits|^movabletype|^mozilla/\\\\d\\\\.\\\\d \\\\(compatible;?\\\\)$|^mozilla/\\\\d\\\\.\\\\d \\\\w*$|^navermailapp|^netsurf|^nuclei|^offline explorer|^php|^postman|^postrank|^python|^rank|^read|^reed|^rest|^serf|^snapchat|^space bison|^svn|^swcd |^taringa|^thumbor/|^track|^tumblr/|^user-agent:|^valid|^venus/fedoraplanet|^w3c|^webbandit/|^webcopier|^wget|^whatsapp|^xenu link sleuth|^yahoo|^yandex|^zdm/\\\\d|^zoom marketplace/|^{{.*}}$|adbeat\\\\.com|appinsights|archive|ask jeeves/teoma|bit\\\\.ly/|bluecoat drtr|browsex|burpcollaborator|capture|catch|check|chrome-lighthouse|chromeframe|classifier|cloud|crawl|cryptoapi|dareboost|datanyze|dataprovider|dejaclick|dmbrowser|download|evc-batch/|feed|firephp|freesafeip|gomezagent|headless|httrack|hubspot marketing grader|hydra|ibisbrowser|images|inspect|iplabel|ips-agent|java(?!;)|library|mail\\\\.ru/|manager|monitor|neustar wpm|node|nutch|offbyone|optimize|pageburst|parser|perl|phantom|pingdom|powermarks|preview|proxy|ptst[ /]\\\\d|reader|reputation|resolver|retriever|rexx;|rigor|robot|rss|scan|scrape|server|sogou|sparkler/|speedcurve|spider|splash|statuscake|stumbleupon\\\\.com|supercleaner|synapse|synthetic|tools|torrent|trace|transcoder|twingly recon|url|virtuoso|wappalyzer|webglance|webkit2png|whatcms/|wordpress|zgrab\";\n\n// src/index.ts\nvar naivePattern = /bot|spider|crawl|http|lighthouse/i;\nvar pattern;\nfunction getPattern() {\n  if (pattern instanceof RegExp) {\n    return pattern;\n  }\n  try {\n    pattern = new RegExp(fullPattern, \"i\");\n  } catch (error) {\n    pattern = naivePattern;\n  }\n  return pattern;\n}\nvar list = patterns_default;\nvar isbotNaive = (userAgent) => Boolean(userAgent) && naivePattern.test(userAgent);\nfunction isbot(userAgent) {\n  return Boolean(userAgent) && getPattern().test(userAgent);\n}\nvar createIsbot = (customPattern) => (userAgent) => Boolean(userAgent) && customPattern.test(userAgent);\nvar createIsbotFromList = (list2) => {\n  const pattern2 = new RegExp(list2.join(\"|\"), \"i\");\n  return (userAgent) => Boolean(userAgent) && pattern2.test(userAgent);\n};\nvar isbotMatch = (userAgent) => userAgent?.match(getPattern())?.[0] ?? null;\nvar isbotMatches = (userAgent) => list.map((part) => userAgent?.match(new RegExp(part, \"i\"))?.[0]).filter(Boolean);\nvar isbotPattern = (userAgent) => userAgent ? list.find((pattern2) => new RegExp(pattern2, \"i\").test(userAgent)) ?? null : null;\nvar isbotPatterns = (userAgent) => userAgent ? list.filter((pattern2) => new RegExp(pattern2, \"i\").test(userAgent)) : [];\nexport {\n  createIsbot,\n  createIsbotFromList,\n  getPattern,\n  isbot,\n  isbotMatch,\n  isbotMatches,\n  isbotNaive,\n  isbotPattern,\n  isbotPatterns,\n  list\n};\n","import { isbot, isbotMatch, isbotPatterns } from \"..\";\n\n{\n\tconst textarea = document.querySelector(\"textarea\") as HTMLTextAreaElement;\n\tconst output = document.querySelector(\"output\") as HTMLOutputElement;\n\tconst copyLink = document.querySelector(\n\t\t'[id=\"copy-link\"]',\n\t) as HTMLButtonElement;\n\tlet timer: ReturnType<typeof setTimeout>;\n\n\tconst url = new URL(window.location.href);\n\tconst ua = url.searchParams.get(\"ua\");\n\n\ttextarea.childNodes.forEach((child) => child.parentNode?.removeChild(child));\n\ttextarea.appendChild(document.createTextNode(ua || navigator.userAgent));\n\ttextarea.addEventListener(\"keyup\", change);\n\ttextarea.addEventListener(\"paste\", change);\n\ttextarea.addEventListener(\"focus\", () => textarea.select());\n\tcheck();\n\n\tfunction change({ target }: Event): void {\n\t\tconst { value } = target as HTMLTextAreaElement;\n\t\tclearTimeout(timer);\n\t\ttimer = setTimeout(check, 200, value);\n\t}\n\n\tfunction append(\n\t\tparent: DocumentFragment,\n\t\ttag: string | null,\n\t\tstring: string | boolean | null,\n\t): void {\n\t\tif (tag) {\n\t\t\tconst ele = document.createElement(\"kbd\");\n\t\t\tele.appendChild(document.createTextNode(`${string}`));\n\t\t\tparent.appendChild(ele);\n\t\t} else {\n\t\t\tparent.appendChild(document.createTextNode(`${string}`));\n\t\t}\n\t}\n\n\tfunction details(ua: string): DocumentFragment {\n\t\tconst fragment = document.createDocumentFragment();\n\t\tconst is = isbot(ua);\n\n\t\tif (is) {\n\t\t\tconst found = isbotMatch(ua) as string;\n\t\t\tconst patterns = isbotPatterns(ua);\n\t\t\tconst pattern = patterns.find((pattern: string): boolean =>\n\t\t\t\tnew RegExp(pattern, \"i\").test(found),\n\t\t\t) as string;\n\t\t\tconsole.log(patterns, pattern);\n\t\t\tappend(fragment, null, \"I think so, yes\\n\");\n\t\t\tappend(fragment, null, \"The substring \");\n\t\t\tappend(fragment, \"kbd\", found);\n\t\t\tappend(fragment, null, \" matches the pattern \");\n\t\t\tappend(fragment, \"kbd\", pattern);\n\t\t} else {\n\t\t\tappend(\n\t\t\t\tfragment,\n\t\t\t\tnull,\n\t\t\t\t\"I don't think so, no\\nI could not find a pattern I recognise\",\n\t\t\t);\n\t\t}\n\t\treturn fragment;\n\t}\n\n\tfunction check(value = textarea.innerHTML): void {\n\t\tvalue = value.trim();\n\t\twhile (output.firstChild) {\n\t\t\toutput.removeChild(output.firstChild);\n\t\t}\n\t\tif (value === \"\") {\n\t\t\toutput.appendChild(\n\t\t\t\tdocument.createTextNode(\"Insert user agent string in the text box\"),\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\toutput.appendChild(details(value));\n\t}\n\n\tcopyLink.addEventListener(\"click\", (event: Event): void => {\n\t\tevent.preventDefault();\n\t\tconst { protocol, host, pathname } = document.location;\n\t\tnavigator.clipboard.writeText(\n\t\t\t[\n\t\t\t\tprotocol,\n\t\t\t\t\"//\",\n\t\t\t\thost,\n\t\t\t\tpathname,\n\t\t\t\t\"?ua=\",\n\t\t\t\tencodeURIComponent(textarea.value),\n\t\t\t].join(\"\"),\n\t\t);\n\t\tconst dialog = document.createElement(\"dialog\");\n\t\tdialog.appendChild(document.createTextNode(\"copied to clipboard\"));\n\t\tdocument.body.appendChild(dialog);\n\t\tdialog.showModal();\n\t\tsetTimeout((): void => {\n\t\t\tdialog.addEventListener(\"transitionend\", () => {\n\t\t\t\tdialog.close();\n\t\t\t\tdocument.body.removeChild(dialog);\n\t\t\t});\n\t\t\tdialog.style.opacity = \"0\";\n\t\t}, 1000);\n\t});\n}\n"]}